# From https://github.com/google/cargo-raze#remote-dependency-mode
[package]
name = "compile_with_bazel"
version = "0.0.0"

# Mandatory (or Cargo tooling is unhappy)
[lib]
path = "fake_lib.rs"

[dependencies]
serde = "1.0.127"
serde_derive = "1.0.127"
serde_json = "1.0.66"
# automerge-frontend = { git = "https://github.com/ttiurani/automerge-rs.git", rev = "c4230c029b0e20328fe2f5606e5503ffcd2cc964" }
duct = "=0.13.4"
hypercore = { git = "https://github.com/datrs/hypercore", rev = "8d8cbef8a884a70e8d12d80968c1d97be2ceea0b" }
# hypercore-protocol = { git = "https://github.com/ttiurani/hypercore-protocol-rs", rev = "7208fda866b8235992e988b0e9ed3e4edf6787d4" }
hypercore-protocol = { git = "file:///Users/ttiurani/devel/em/hypercore-protocol-rs", branch = "debug" }
async-tungstenite = { version = "0.13.1", features = ["async-std-runtime"] }
bytes = "0.5.0"
fern = "0.6.0"
log = "0.4.14" # See below for hack to get the dependency value-bag to work with build.rs
anyhow = "1.0.33"
clap = "3.0.0-beta.4" # See below for hack to get #![doc = include_str!("../README.md")] to work
chrono = { version = "0.4.19" }
futures = "^0.3.5"
async-std = "1.9.0"
tide = "0.16.0"
tide-websockets = "0.4.0"
ctrlc = { version = "3.0", features = ["termination"] }
async-ctrlc = "1.2.0"
random-access-disk = "2.0.0"
random-access-storage = "4.0.0"
hex = "0.4"
reusable-box-future = "0.2.0"

# Needed for log to build
[package.metadata.raze.crates.value-bag.'1.0.0-alpha.7']
gen_buildrs = false
additional_flags = [
    "--cfg=value_bag_capture_ctor"
]

# Needed for clap to build with spurious include
[package.metadata.raze.crates.clap.'3.0.0-beta.4']
compile_data_attr = "glob([\"README.md\"])"

# Needed for lazy_static to build on OSX...
# security-framework = "0.4.4" # bazel fix
# security-framework-sys = "0.4.3"
# tempfile = "3.1.0"
# lazy_static = "1.4.0"
# libc = "=0.2.76"
# ...lazy_static end

[package.metadata.raze]
workspace_path = "//third_party/cargo"
package_aliases_dir = "."
genmode = "Remote"
default_gen_buildrs = true
targets = [
    "x86_64-apple-darwin",
    "x86_64-pc-windows-msvc",
    "x86_64-unknown-linux-gnu",
]

# See https://github.com/google/cargo-raze/issues/41#issuecomment-682272829
# [raze.crates.native-tls.'0.2.6']
# additional_deps = [
#    "@raze__lazy_static__1_4_0//:lazy_static",
#    "@raze__security_framework__0_4_4//:security_framework",
#    "@raze__security_framework_sys__0_4_3//:security_framework_sys",
#    "@raze__tempfile__3_1_0//:tempfile",
#    "@raze__libc__0_2_76//:libc"
# ]

# [build-dependencies]
# prost-build = "0.8.0"
