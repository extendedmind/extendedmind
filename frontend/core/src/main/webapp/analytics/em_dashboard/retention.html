<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>retention dashboard</title>

    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>

    .bar {
      fill: steelblue;
    }

    .bar:hover {
      fill: lightblue;
    }

    .axis {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .x.axis path {
      display: none;
    }

    </style>
</head>
<body>
<div class="container" role="main">
    <h1>extended mind retention dashboard</h1>
    <h4><a href="index.html">Change to: Basic analytics</a></h4>
    <hr>

    <table id="retention" class="table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Signups</th>
          <th>D1</th>
          <th>D7</th>
          <th>D30</th>
        </tr>
    </thead>
    <tbody>
        <!-- 
        example structure
        <tr>
            <td>16.6.2014</td>
            <td>2140</td>
            <td>40%</td>
            <td>30%</td>
            <td>15%</td>
        </tr>
        -->
    </tbody>
    </table>
    <!-- 
    <h3>Day 1 retention</h3>
    <p>Does not include admin or beta users.</p>
    <p><strong>Cube requests</strong></p>
    <code>
    Signups with user uuid: https://ext.md/evaluate/1.0/event?expression=signUp(user.uuid)&start=2014-05-12&stop=2014-08-06&step=864e5<br>
    Sessions per day: https://ext.md/evaluate/1.0/event?expression=session(user.uuid)&start=2014-05-12&stop=2014-08-04&step=864e5
    Sessions filtered with uuids: https://ext.md/evaluate/1.0/metric/get?expression=sum(session.in(user.uuid,["user-uuid","user-uuid"]))&start=2014-05-12&stop=2014-08-06&step=864e5
</code>
    <div id="chart1"></div>

    <hr>

    <h3>Day 7 retention</h3>
    <p>Unique users who have session. Does not include admin or beta users.</p>
    <code>https://ext.md/evaluate/1.0/metric?expression=distinct(session(user.uuid).eq(user.type,2))&start=2014-05-1&stop=2014-07-23&step=864e5</code>
    <div id="chart2"></div>

    <hr>

    <h3>Day 30 retention</h3>
    <p>Does not include admin or beta users.</p>
    <code>https://ext.md/evaluate/1.0/metric?expression=distinct(addTask(user.uuid).eq(user.type,2))&start=2014-05-1&stop=2014-07-23&step=864e5</code>
    <div id="chart3"></div>

    <hr>
    -->

</div>

<script src="js/jquery-2.1.1.js"></script>
<script src="js/autodate.js"></script>
<script src="js/d3/d3.js"></script>
<script src="js/barchart.js"></script>
<script src="js/retentionCalc.js"></script>
<script>

    var today = new Date();
    checkRetention(today, 14);

    /* 
    initChartToElement("#chart1","data/sessions.json");
    initChartToElement("#chart2","data/unique_users_sessions.json");
    initChartToElement("#chart3","data/visit_signup.json");
    */

</script>
</body>