@import "foundation.less";
@import "inputs.less";

/*

<h1 class="main-heading">Animations</h1>

*/

@timing-animate: cubic-bezier(0.250, 0.460, 0.450, 0.940);
@timing-animate-steep: cubic-bezier(.01, 1.11, 0, .97);

@speed-animate-item-fade: 1s;
@speed-animate-item-shrink: .5s;
@delay-animate-item-shrink: .5s;
@timing-animate-item: @timing-animate;

@speed-animate-toaster-fade: .5s;
@timing-animate-toaster: @timing-animate;

@speed-animate-calendar-fade: .3s;
@timing-animate-calendar: @timing-animate;

// 1. Set initial max-height for item to make max-height animation work in WebKit browsers.
.animate-list-item-leave {
  max-height: 44px; // [1]
}

// .list-item-leave is added to an element when we want the element to be removed from list.
// Class postfixes: "-add" and "-add-active" are added by angular $animate service.
// 1. TODO: remove when grid is implemented and correct values are inherited
// 2. Animate opacity first, delay max-height animation by 0.5s.
.list-item-leave-add, {
  pointer-events: none;
  max-height: 44px; // [1]
  opacity: 1;       // [1]

  -webkit-transition-property: opacity, max-height;                                   // [2]
  -webkit-transition-duration: @speed-animate-item-fade, @speed-animate-item-shrink;  // [2]
  -webkit-transition-timing-function: @timing-animate-item, @timing-animate-item;     // [2]
  -webkit-transition-delay: 0s, @delay-animate-item-shrink;                           // [2]

  -moz-transition-property: opacity, max-height;                                      // [2]
  -moz-transition-duration: @speed-animate-item-fade, @speed-animate-item-shrink;     // [2]
  -moz-transition-timing-function: @timing-animate-item, @timing-animate-item;        // [2]
  -moz-transition-delay: 0s, @delay-animate-item-shrink;                              // [2]

  -o-transition-property: opacity, max-height;                                        // [2]
  -o-transition-duration: @speed-animate-item-fade, @speed-animate-item-shrink;       // [2]
  -o-transition-timing-function: @timing-animate-item, @timing-animate-item;          // [2]
  -o-transition-delay: 0s, @delay-animate-item-shrink;                                // [2]

  -ms-transition-property: opacity, max-height;                                       // [2]
  -ms-transition-duration: @speed-animate-item-fade, @speed-animate-item-shrink;      // [2]
  -ms-transition-timing-function: @timing-animate-item, @timing-animate-item;         // [2]
  -ms-transition-delay: 0s, @delay-animate-item-shrink;                               // [2]

  transition-property: opacity, max-height;                                           // [2]
  transition-duration: @speed-animate-item-fade, @speed-animate-item-shrink;          // [2]
  transition-timing-function: @timing-animate-item, @timing-animate-item;             // [2]
  transition-delay: 0s, @delay-animate-item-shrink;                                   // [2]
}

// 1. Fade out and shrink .list-item
.list-item-leave,
.list-item-leave-add.list-item-leave-add-active {
  opacity: 0;     // [1]
  max-height: 0;  // [2]
}

.list-item-completing-add {
  transition-duration: 2s;
  input[type="checkbox"]:checked + label:before {
    transition: color 2s ease;
  }
}

.list-item-completing,
.list-item-completing-add.list-item-completing-add-active {
  input[type="checkbox"]:checked + label:before {
    color: @color-checkbox-checked;
    content: @icon-selection-checked;
  }
}

// 1. Simple fade-in-out animation.
.animate-toaster.ng-enter, .animate-toaster.ng-leave {
  -webkit-transition: opacity @timing-animate-toaster @speed-animate-toaster-fade;  // [1]
  -moz-transition: opacity @timing-animate-toaster @speed-animate-toaster-fade;     // [1]
  -o-transition: opacity @timing-animate-toaster @speed-animate-toaster-fade;       // [1]
  -ms-transition: opacity @timing-animate-toaster @speed-animate-toaster-fade;      // [1]
  transition: opacity @timing-animate-toaster @speed-animate-toaster-fade;          // [1]
}

// 1. Starting point for fade in and ending point for fade out.
.animate-toaster.ng-enter,
.animate-toaster.ng-leave.ng-leave-active {
  opacity: 0; // [1]
}

// 1. Starting point for fade out and ending point for fade in.
.animate-toaster.ng-leave,
.animate-toaster.ng-enter.ng-enter-active {
  opacity: 1; // [1]
}

// 1. Crossfade between calendar and date field.
//    We are animating entering part of ng-if only, because:
//      Date field: ng-if="!calendarOpen"
//      Calendar:   ng-if="calendarOpen"
.animate-calendar.ng-enter {
  pointer-events: none;
  -webkit-transition: opacity @timing-animate-calendar @speed-animate-calendar-fade;  // [1]
  -moz-transition: opacity @timing-animate-calendar @speed-animate-calendar-fade;     // [1]
  -o-transition: opacity @timing-animate-calendar @speed-animate-calendar-fade;       // [1]
  -ms-transition: opacity @timing-animate-calendar @speed-animate-calendar-fade;      // [1]
  transition: opacity @timing-animate-calendar @speed-animate-calendar-fade;          // [1]
}

// 1. Fade in
.animate-calendar.ng-enter {
  opacity: 0; // [1]
}

// 1. Fade in
.animate-calendar.ng-enter.ng-enter-active {
  opacity: 1; // [1]
}
