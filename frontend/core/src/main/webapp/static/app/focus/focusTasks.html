<div class="container-content--outer" list-container list-container-override-vertical-resize="true"
  drawer-handle="left"
  drawer-handle-register-activate="registerFeatureActivateCallback(activate, 'focus', 'focusTasks')">
  <section ng-show="isContentVisible('focus', 'tasks')"
    class="container-content" ng-controller="DatesController">

    <div ng-if="datepickerVisible && columns > 1" editable-field-container="auto">
      <a href class="datepicker-back" ng-click="swipeDatepickerLeft()" editable-field>
        <span class="icon-arrow-left"></span>
      </a>
    </div>
    <div ng-if="datepickerVisible" class="swiper-container datepicker" swiper-container="datepicker" swiper-type="main" expected-slides="5" data-snap-ignore="true">
      <!-- Set editable-field-container to child to circumvent AngularJS error https://docs.angularjs.org/error/$compile/multidir -->
      <div class="swiper-wrapper" editable-field-container="auto" editable-field-container-clicked-elsewhere="closeDatepicker()">
        <div class="swiper-slide" swiper-slide="datepicker/right" slide-index="0" swiper-slide-duplicate="true">
          <div class="datepicker-week row">
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][0].yyyymmdd), datepickerWeeks[2][0].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][0].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][0].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][0].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][1].yyyymmdd), datepickerWeeks[2][1].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][1].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][1].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][1].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][2].yyyymmdd), datepickerWeeks[2][2].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][2].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][2].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][2].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][3].yyyymmdd), datepickerWeeks[2][3].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][3].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][3].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][3].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][4].yyyymmdd), datepickerWeeks[2][4].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][4].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][4].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][4].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][5].yyyymmdd), datepickerWeeks[2][5].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][5].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][5].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][5].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][6].yyyymmdd), datepickerWeeks[2][6].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][6].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][6].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][6].displayDate"></span>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="swiper-slide" swiper-slide="datepicker/first" slide-index="1" swiper-slide-loop-start="true">
          <div class="datepicker-week row">
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][0].yyyymmdd), datepickerWeeks[0][0].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][0].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][0].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][0].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][1].yyyymmdd), datepickerWeeks[0][1].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][1].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][1].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][1].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][2].yyyymmdd), datepickerWeeks[0][2].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][2].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][2].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][2].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][3].yyyymmdd), datepickerWeeks[0][3].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][3].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][3].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][3].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][4].yyyymmdd), datepickerWeeks[0][4].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][4].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][4].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][4].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][5].yyyymmdd), datepickerWeeks[0][5].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][5].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][5].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][5].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][6].yyyymmdd), datepickerWeeks[0][6].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][6].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][6].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][6].displayDate"></span>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="swiper-slide" swiper-slide="datepicker/middle" slide-index="2">
          <div class="datepicker-week row">
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][0].yyyymmdd), datepickerWeeks[1][0].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][0].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][0].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][0].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][1].yyyymmdd), datepickerWeeks[1][1].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][1].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][1].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][1].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][2].yyyymmdd), datepickerWeeks[1][2].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][2].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][2].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][2].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][3].yyyymmdd), datepickerWeeks[1][3].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][3].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][3].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][3].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][4].yyyymmdd), datepickerWeeks[1][4].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][4].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][4].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][4].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][5].yyyymmdd), datepickerWeeks[1][5].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][5].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][5].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][5].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[1][6].yyyymmdd), datepickerWeeks[1][6].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[1][6].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[1][6].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[1][6].displayDate"></span>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="swiper-slide" swiper-slide="datepicker/right" slide-index="3">
          <div class="datepicker-week row">
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][0].yyyymmdd), datepickerWeeks[2][0].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][0].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][0].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][0].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][1].yyyymmdd), datepickerWeeks[2][1].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][1].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][1].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][1].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][2].yyyymmdd), datepickerWeeks[2][2].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][2].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][2].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][2].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][3].yyyymmdd), datepickerWeeks[2][3].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][3].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][3].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][3].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][4].yyyymmdd), datepickerWeeks[2][4].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][4].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][4].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][4].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][5].yyyymmdd), datepickerWeeks[2][5].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][5].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][5].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][5].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[2][6].yyyymmdd), datepickerWeeks[2][6].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[2][6].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[2][6].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[2][6].displayDate"></span>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="swiper-slide" swiper-slide="datepicker/first" slide-index="4" swiper-slide-duplicate="true">
          <div class="datepicker-week row">
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][0].yyyymmdd), datepickerWeeks[0][0].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][0].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][0].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][0].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][1].yyyymmdd), datepickerWeeks[0][1].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][1].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][1].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][1].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][2].yyyymmdd), datepickerWeeks[0][2].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][2].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][2].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][2].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][3].yyyymmdd), datepickerWeeks[0][3].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][3].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][3].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][3].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][4].yyyymmdd), datepickerWeeks[0][4].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][4].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][4].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][4].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][5].yyyymmdd), datepickerWeeks[0][5].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][5].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][5].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][5].displayDate"></span>
                </div>
              </a>
            </div>
            <div class="datepicker-day-container" ng-class="[getIsDayActiveClass(datepickerWeeks[0][6].yyyymmdd), datepickerWeeks[0][6].type]">
              <a href class="datepicker-day-wrapper" swiper-click="changeDaySlide(datepickerWeeks[0][6].yyyymmdd)">
                <div class="datepicker-day">
                  <span class="text-details datepicker-weekday" ng-bind="datepickerWeeks[0][6].weekday"></span>
                  <span class="datepicker-date" ng-bind="datepickerWeeks[0][6].displayDate"></span>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div ng-if="datepickerVisible && columns > 1" editable-field-container="auto">
      <a href class="datepicker-forward" ng-click="swipeDatepickerRight()" editable-field>
        <span class="icon-arrow-right"></span>
      </a>
    </div>

    <div class="swiper-container" swiper-container="focus/tasks" swiper-type="page" expected-slides="5">
      <div class="swiper-wrapper" ng-class="getOnboardingPhase('focus', 'tasks') === 6 && 'onboarding'">

        <div class="swiper-slide" swiper-slide="focus/tasks/rightDuplicate" slide-index="0"
        swiper-slide-duplicate="true">
          <div class="container-content" ng-class="daySlides[2].pastDate && 'past-date'"
            list="getTasksArray('date', {date: daySlides[2].info, pastDate: daySlides[2].pastDate})"
            list-options="{hideItemDefault: true, isBounded: isAgendaVisible,
            registerModeChanged: registerAgendaVisibilityChangedCallback,
            id: 'focus/tasks/rightDuplicate', scrollInactiveTop: true, duplicate: 'focus/tasks/right'}">

            <div ng-hide="datepickerVisible" class="group-mixed heading">
              <div class="group-mixed--middle" swiper-click="openDatepicker(daySlides[2].info)">
                <h2 class="group-heading justified" ng-bind="daySlides[2].heading"></h2>
              </div>
              <div class="group-mixed--right" task-list-completed="{{daySlides[2].pastDate}}"></div>
            </div>

            <div list-item-add="getNewDayTask(2)" list-item-add-save="saveTask(newItem)"
              ng-include="urlBase + 'app/tasks/taskListItemAdd.html'"></div>
            <div class="animate-list-item-leave"
              ng-repeat="task in getVisibleArray(getFullArray, currentListLimitTo) track by task.trans.uuid"
              list-item ng-include="urlBase + 'app/tasks/taskListItem.html'"></div>
            <div list-prompt="tasks" list-prompt-infos="listInfos" list-prompt-load-more="isAgendaVisible()"
              list-prompt-hide-load="daySlidesInfosCleared" list-prompt-load-more-fn="addMoreItems()"
              list-prompt-hide="[listItemAddActive, isTutorialInProgress(), daySlidesInfosCleared]">
            </div>

            <a href ng-if="isAgendaVisible() && daySlides[2].info !== null" ng-hide="daySlidesInfosCleared"
              class="link agenda" ng-click="openCalendar(daySlides[2].info)">
              <div ng-repeat="agendaEvent in getEventInstances(daySlides[2].info) as agendaEvents track by agendaEvent.event_id">
                <div class="group-mixed with-checkbox">
                  <div class="group-mixed--left">
                    <span ng-class="!agendaEvent.allDay && 'emphasize'" class="text-agenda--time"
                      ng-bind="agendaEvent.allDay ? 'all day' : agendaEvent.begin + '\n' + agendaEvent.end">
                    </span>
                  </div>
                  <div class="group-mixed--middle">
                    <span ng-bind="agendaEvent.title" class="text-agenda--title" clamp=2></span>
                    <span class="text-details text-agenda--details"
                      ng-bind="agendaEvent.calendarName + (agendaEvent.eventLocation ? ': ' + agendaEvent.eventLocation : '')"
                      clamp=1>
                    </span>
                  </div>
                  <div ng-if="agendaEvent.rrule" class="group-mixed--right">
                    <span class="icon-sort small"></span>
                  </div>
                </div>
              </div>
              <span ng-if="!agendaEvents || !agendaEvents.length" class="row text-details">no events</span>
            </a>
          </div>
        </div>

        <div class="swiper-slide" swiper-slide="focus/tasks/left" slide-index="1" swiper-slide-loop-start="true">
          <div class="container-content" ng-class="daySlides[0].pastDate && 'past-date'"
            list="getTasksArray('date', {date: daySlides[0].info, pastDate: daySlides[0].pastDate})"
            list-options="{hideItemDefault: true, isBounded: isAgendaVisible,
            registerModeChanged: registerAgendaVisibilityChangedCallback,
            id: 'focus/tasks/left', scrollInactiveTop: true, duplicate: 'focus/tasks/leftDuplicate'}">

            <div ng-hide="datepickerVisible" class="group-mixed heading">
              <div class="group-mixed--middle" ng-class="getOnboardingPhase('focus', 'tasks') === 6 && 'onboarding'" swiper-click="openDatepicker(daySlides[0].info)">
                <h2 class="group-heading justified" ng-bind="daySlides[0].heading"></h2>
              </div>
              <div class="group-mixed--right" task-list-completed="{{daySlides[0].pastDate}}"></div>
            </div>

            <div list-item-add="getNewDayTask(0)" list-item-add-save="saveTask(newItem)"
              ng-include="urlBase + 'app/tasks/taskListItemAdd.html'"></div>
            <div class="animate-list-item-leave"
              ng-repeat="task in getVisibleArray(getFullArray, currentListLimitTo) track by task.trans.uuid"
              list-item ng-include="urlBase + 'app/tasks/taskListItem.html'"></div>
            <div list-prompt="tasks" list-prompt-infos="listInfos" list-prompt-load-more="isAgendaVisible()"
              list-prompt-hide-load="daySlidesInfosCleared" list-prompt-load-more-fn="addMoreItems()"
              list-prompt-hide="[listItemAddActive, isTutorialInProgress(), daySlidesInfosCleared]">
            </div>

            <a href ng-if="isAgendaVisible() && daySlides[0].info !== null" ng-hide="daySlidesInfosCleared"
              class="link agenda" ng-click="openCalendar(daySlides[0].info)">
              <div ng-repeat="agendaEvent in getEventInstances(daySlides[0].info) as agendaEvents track by agendaEvent.event_id">
                <div class="group-mixed with-checkbox">
                  <div class="group-mixed--left">
                    <span ng-class="!agendaEvent.allDay && 'emphasize'" class="text-agenda--time"
                      ng-bind="agendaEvent.allDay ? 'all day' : agendaEvent.begin + '\n' + agendaEvent.end">
                    </span>
                  </div>
                  <div class="group-mixed--middle">
                    <span ng-bind="agendaEvent.title" class="text-agenda--title" clamp=2></span>
                    <span class="text-details text-agenda--details"
                      ng-bind="agendaEvent.calendarName + (agendaEvent.eventLocation ? ': ' + agendaEvent.eventLocation : '')"
                      clamp=1>
                    </span>
                  </div>
                  <div ng-if="agendaEvent.rrule" class="group-mixed--right">
                    <span class="icon-sort small"></span>
                  </div>
                </div>
              </div>
              <span ng-if="!agendaEvents || !agendaEvents.length" class="row text-details">no events</span>
            </a>
          </div>
        </div>

        <div class="swiper-slide" swiper-slide="focus/tasks/middle" slide-index="2">
          <div class="container-content" ng-class="daySlides[1].pastDate && 'past-date'"
            list="getTasksArray('date', {date: daySlides[1].info, pastDate: daySlides[1].pastDate})"
            list-options="{hideItemDefault: true, isBounded: isAgendaVisible,
            registerModeChanged: registerAgendaVisibilityChangedCallback,
            id: 'focus/tasks/middle', scrollInactiveTop: true}">

            <div ng-hide="datepickerVisible" class="group-mixed heading">
              <div class="group-mixed--middle" ng-class="getOnboardingPhase('focus', 'tasks') === 6 && 'onboarding'" swiper-click="openDatepicker(daySlides[1].info)">
                <h2 class="group-heading justified" ng-bind="daySlides[1].heading"></h2>
              </div>
              <div class="group-mixed--right" task-list-completed="{{daySlides[1].pastDate}}"></div>
            </div>

            <div list-item-add="getNewDayTask(1)" list-item-add-save="saveTask(newItem)"
              ng-include="urlBase + 'app/tasks/taskListItemAdd.html'"></div>
            <div class="animate-list-item-leave"
              ng-repeat="task in getVisibleArray(getFullArray, currentListLimitTo) track by task.trans.uuid"
              list-item ng-include="urlBase + 'app/tasks/taskListItem.html'"></div>
            <div list-prompt="tasks" list-prompt-infos="listInfos" list-prompt-load-more="isAgendaVisible()"
              list-prompt-hide-load="daySlidesInfosCleared" list-prompt-load-more-fn="addMoreItems()"
              list-prompt-hide="[listItemAddActive, isTutorialInProgress(), daySlidesInfosCleared]">
            </div>

            <a href ng-if="isAgendaVisible() && daySlides[1].info !== null" ng-hide="daySlidesInfosCleared"
              class="link agenda" ng-click="openCalendar(daySlides[1].info)">
              <div ng-repeat="agendaEvent in getEventInstances(daySlides[1].info) as agendaEvents track by agendaEvent.event_id">
                <div class="group-mixed with-checkbox">
                  <div class="group-mixed--left">
                    <span ng-class="!agendaEvent.allDay && 'emphasize'" class="text-agenda--time"
                      ng-bind="agendaEvent.allDay ? 'all day' : agendaEvent.begin + '\n' + agendaEvent.end">
                    </span>
                  </div>
                  <div class="group-mixed--middle">
                    <span ng-bind="agendaEvent.title" class="text-agenda--title" clamp=2></span>
                    <span class="text-details text-agenda--details"
                      ng-bind="agendaEvent.calendarName + (agendaEvent.eventLocation ? ': ' + agendaEvent.eventLocation : '')"
                      clamp=1>
                    </span>
                  </div>
                  <div ng-if="agendaEvent.rrule" class="group-mixed--right">
                    <span class="icon-sort small"></span>
                  </div>
                </div>
              </div>
              <span ng-if="!agendaEvents || !agendaEvents.length" class="row text-details">no events</span>
            </a>
          </div>
        </div>

        <div class="swiper-slide" swiper-slide="focus/tasks/right" slide-index="3">
          <div class="container-content" ng-class="daySlides[2].pastDate && 'past-date'"
            list="getTasksArray('date', {date: daySlides[2].info, pastDate: daySlides[2].pastDate})"
            list-options="{hideItemDefault: true, isBounded: isAgendaVisible,
            registerModeChanged: registerAgendaVisibilityChangedCallback,
            id: 'focus/tasks/right', scrollInactiveTop: true, duplicate: 'focus/tasks/rightDuplicate'}">

            <div ng-hide="datepickerVisible" class="group-mixed heading">
              <div class="group-mixed--middle" ng-class="getOnboardingPhase('focus', 'tasks') === 6 && 'onboarding'" swiper-click="openDatepicker(daySlides[2].info)">
                <h2 class="group-heading justified" ng-bind="daySlides[2].heading"></h2>
              </div>
              <div class="group-mixed--right" task-list-completed="{{daySlides[2].pastDate}}"></div>
            </div>

            <div list-item-add="getNewDayTask(2)" list-item-add-save="saveTask(newItem)"
              ng-include="urlBase + 'app/tasks/taskListItemAdd.html'"></div>
            <div class="animate-list-item-leave"
              ng-repeat="task in getVisibleArray(getFullArray, currentListLimitTo) track by task.trans.uuid"
              list-item ng-include="urlBase + 'app/tasks/taskListItem.html'"></div>
            <div list-prompt="tasks" list-prompt-infos="listInfos" list-prompt-load-more="isAgendaVisible()"
              list-prompt-hide-load="daySlidesInfosCleared" list-prompt-load-more-fn="addMoreItems()"
              list-prompt-hide="[listItemAddActive, isTutorialInProgress(), daySlidesInfosCleared]">
            </div>

            <a href ng-if="isAgendaVisible() && daySlides[2].info !== null" ng-hide="daySlidesInfosCleared"
              class="link agenda" ng-click="openCalendar(daySlides[2].info)">
              <div ng-repeat="agendaEvent in getEventInstances(daySlides[2].info) as agendaEvents track by agendaEvent.event_id">
                <div class="group-mixed with-checkbox">
                  <div class="group-mixed--left">
                    <span ng-class="!agendaEvent.allDay && 'emphasize'" class="text-agenda--time"
                      ng-bind="agendaEvent.allDay ? 'all day' : agendaEvent.begin + '\n' + agendaEvent.end">
                    </span>
                  </div>
                  <div class="group-mixed--middle">
                    <span ng-bind="agendaEvent.title" class="text-agenda--title" clamp=2></span>
                    <span class="text-details text-agenda--details"
                      ng-bind="agendaEvent.calendarName + (agendaEvent.eventLocation ? ': ' + agendaEvent.eventLocation : '')"
                      clamp=1>
                    </span>
                  </div>
                  <div ng-if="agendaEvent.rrule" class="group-mixed--right">
                    <span class="icon-sort small"></span>
                  </div>
                </div>
              </div>
              <span ng-if="!agendaEvents || !agendaEvents.length" class="row text-details">no events</span>
            </a>
          </div>
        </div>

        <div class="swiper-slide" swiper-slide="focus/tasks/leftDuplicate" slide-index="4" swiper-slide-duplicate="true">
          <div class="container-content" ng-class="daySlides[0].pastDate && 'past-date'"
            list="getTasksArray('date', {date: daySlides[0].info, pastDate: daySlides[0].pastDate})"
            list-options="{hideItemDefault: true, isBounded: isAgendaVisible,
            registerModeChanged: registerAgendaVisibilityChangedCallback,
            id: 'focus/tasks/leftDuplicate', scrollInactiveTop: true, duplicate: 'focus/tasks/left'}">

            <div ng-hide="datepickerVisible" class="group-mixed heading">
              <div class="group-mixed--middle" ng-class="getOnboardingPhase('focus', 'tasks') === 6 && 'onboarding'" swiper-click="openDatepicker(daySlides[0].info)">
                <h2 class="group-heading justified" ng-bind="daySlides[0].heading"></h2>
              </div>
              <div class="group-mixed--right" task-list-completed="{{daySlides[0].pastDate}}"></div>
            </div>

            <div list-item-add="getNewDayTask(0)" list-item-add-save="saveTask(newItem)"
              ng-include="urlBase + 'app/tasks/taskListItemAdd.html'"></div>
            <div class="animate-list-item-leave"
              ng-repeat="task in getVisibleArray(getFullArray, currentListLimitTo) track by task.trans.uuid"
              list-item ng-include="urlBase + 'app/tasks/taskListItem.html'"></div>
            <div list-prompt="tasks" list-prompt-infos="listInfos" list-prompt-load-more="isAgendaVisible()"
              list-prompt-hide-load="daySlidesInfosCleared" list-prompt-load-more-fn="addMoreItems()"
              list-prompt-hide="[listItemAddActive, isTutorialInProgress(), daySlidesInfosCleared]">
            </div>

            <a href ng-if="isAgendaVisible() && daySlides[0].info !== null" ng-hide="daySlidesInfosCleared"
              class="link agenda" ng-click="openCalendar(daySlides[0].info)">
              <div ng-repeat="agendaEvent in getEventInstances(daySlides[0].info) as agendaEvents track by agendaEvent.event_id">
                <div class="group-mixed with-checkbox">
                  <div class="group-mixed--left">
                    <span ng-class="!agendaEvent.allDay && 'emphasize'" class="text-agenda--time"
                      ng-bind="agendaEvent.allDay ? 'all day' : agendaEvent.begin + '\n' + agendaEvent.end">
                    </span>
                  </div>
                  <div class="group-mixed--middle">
                    <span ng-bind="agendaEvent.title" class="text-agenda--title" clamp=2></span>
                    <span class="text-details text-agenda--details"
                      ng-bind="agendaEvent.calendarName + (agendaEvent.eventLocation ? ': ' + agendaEvent.eventLocation : '')"
                      clamp=1>
                    </span>
                  </div>
                  <div ng-if="agendaEvent.rrule" class="group-mixed--right">
                    <span class="icon-sort small"></span>
                  </div>
                </div>
              </div>
              <span ng-if="!agendaEvents || !agendaEvents.length" class="row text-details">no events</span>
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- ONBOARDING -->
  <section ng-if="isOnboarding('focus', 'tasks')" ng-hide="isContentVisible('focus', 'tasks')" class="container-content">

    <!-- PHASE 1 -->
    <div ng-if="getOnboardingPhase('focus', 'tasks') === 1" class="group-instruction">
      <h2 class="group-heading instruction row">
        <span>what do you want to <span class="highlighted">get done</span>?</span>
      </h2>
      <div class="textgroup-ingress row">
        <span>add a <span class="text-highlighted">task</span> by clicking the plus sign below</span>
      </div>
    </div>

    <!-- PHASE 3 -->
    <div ng-if="getOnboardingPhase('focus', 'tasks') === 3" class="group-instruction">
      <h2 class="group-heading instruction row">
        <span>first <span class="highlighted">task</span> created!</span>
      </h2>
      <div class="textgroup-ingress row">
        <span>next let's set up your agenda</span>
      </div>
    </div>

    <!-- PHASE 5 -->
    <div ng-if="getOnboardingPhase('focus', 'tasks') === 5" class="group-instruction">
      <h2 class="group-heading instruction row">
        <span>tutorial <span class="highlighted">complete</span>!</span>
      </h2>
      <div class="textgroup-ingress row">
        <span>to back up your data
          <a href class="highlighted" ng-click="completeOnboarding('user')"><span>sign up</span></a>
          now for a free account
        </span>
      </div>
    </div>

  </section>

  <footer ng-if="isOnboarding('focus', 'tasks')" class="container-content--after group-btn onboarding">
    <button type="submit" ng-if="getOnboardingPhase('focus', 'tasks') === 3" class="btn-action"
      ng-click="openCalendarSettingsAndIncreaseOnboarding()">
      <span class="text-btn">set up calendars</span>
    </button>
    <button type="submit" ng-if="getOnboardingPhase('focus', 'tasks') === 5" class="btn-action"
      ng-click="completeTutorial()">
      <span class="text-btn">got it</span>
    </button>
  </footer>

  <footer class="container-content--after"
    ng-show="isContentVisible('focus', 'tasks') ||
             getOnboardingPhase('focus', 'tasks') === 1"
    list-footer="getFeatureMap('focus')" list-footer-subfeature="tasks"
    ng-class="getOnboardingPhase('focus', 'tasks') === 1 && 'onboarding'">
  </footer>

</div>
