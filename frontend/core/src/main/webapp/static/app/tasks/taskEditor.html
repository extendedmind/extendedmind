<div class="container-fluid" ng-controller="TaskEditorController" ng-class="task.deleted && 'container-disabled'">
  <header class="container-titlebar">
    <div class="container-titlebar--inner">
      <div class="group-symmetrical height-large">
        <a href class="group-symmetrical--left link-navigation highlighted active" ng-click="endTaskEdit()" >
          <span class="text-navigation-back" ng-class="!isFirstSlide() && 'not-swipeable'" ng-bind="titlebarHasText() && !task.deleted ? 'save' : 'back'"></span>
        </a>
        <a ng-if="!task.deleted" class="group-symmetrical--right" href ng-click="deleteTaskInEdit()" >
          <span class="text-trash"></span>
        </a>
        <a ng-if="task.deleted" class="group-symmetrical--right link-navigation highlighted active" href ng-click="undeleteTask(task)"><span class="text-navigation">restore</span></a>
      </div>

      <form role="form" class="group-mixed" autocapitalize="none" autocorrect="off">
        <div class="group-mixed--left">
          <input type="checkbox" ng-click="clickCompleteTaskInEdit()" ng-checked="task.transientProperties.completed" ng-model="task.transientProperties.completed" icon-checkbox="editorTitlebarCheckbox" />
        </div>
        <div class="group-mixed--middle">
          <textarea type="text" ng-model="titlebar.text" ng-keydown="taskTitlebarTextKeyDown($event)" editable-field
          editable-field-register-callbacks="registerTitleBarInputCallbacks(focus, blur)" msd-elastic dynamic-placeholder="enter task title&#8230;" maxlength="128" required ></textarea>
        </div>
      </form>
    </div>
  </header>

  <div class="swiper-container container-fluid--inner" swiper-container="taskEditor" swiper-type="main" expected-slides="2" swiper-container-toggle-drawer-sliding-events="true" swiper-container-slide-changed="editorSwiperSlideChanged()">
    <div class="swiper-wrapper">
      <div class="swiper-slide" swiper-slide="taskEditor/basic" slide-index="0" ng-init="basicSlideInfo = {}">

        <div ng-style="{'padding-bottom': basicSlideInfo.footerHeight}" class="container-content" drawer-override-aisle="right">

          <div ng-if="calendarOpen" class="row swiper-no-swiping animate-fade-in" editable-field-container="auto" editable-field-container-clicked-elsewhere="closeCalendar()" data-snap-ignore="true">
            <div calendar="getCalendarStartingDate(task)" calendar-return-date="closeCalendarAndCall(setTaskDate, task, date)" calendar-set-default-date="true" calendar-bound="false" >
              <button ng-if="task.transientProperties.date" type="button" class="btn-clear pikaday-clear" ng-click="closeCalendarAndCall(clearTransientDate, task)"></button>
            </div>
          </div>

          <div ng-if="listPickerOpen" class="swiper-no-swiping animate-fade-in" editable-field-container="auto" editable-field-container-scrollable="true" editable-field-container-clicked-elsewhere="closeListPicker()" data-snap-ignore="true">
            <div list-picker="lists" list-picker-archived-lists="archivedLists" list-picker-save="closeListPickerAndSetListToItem(task, list)" list-picker-clear="closeListPickerAndClearListFromItem(task, list)" list-picker-get-selected="getListFromUUID(task.transientProperties.list)"></div>
          </div>

          <div ng-if="!calendarOpen && !listPickerOpen">
            <div class="row-form animate-fade-in" ng-click="openCalendar()" ng-bind="task.transientProperties.date ? (task.transientProperties.date | date:'EEE MMM d y' | lowercase) : 'select date'"></div>

            <div class="row-form" ng-click="openListPicker()">
              <span class="text-link" ng-bind="task.transientProperties.list ? getListTitleFromUUID(task.transientProperties.list) : 'select list...'"></span>
            </div>

            <div class="row-form">
              <textarea ng-model="task.transientProperties.description" msd-elastic placeholder="enter description&#8230;" maxlength="1024"></textarea>
            </div>

          </div>

        </div>

        <footer class="container-content--after editor-footer" editor-footer="basicSlideInfo">
          <nav role="navigation" class="swiper-no-swiping group-symmetrical">
            <div class="group-symmetrical--middle">
              <a href ng-if="task.transientProperties.date" ng-click="openExpand()">
                <span class="text-calendar"></span>
              </a>
            </div>
            <a href ng-click="swipeToAdvanced()" class="group-symmetrical--right link-navigation">
              <span class="text-navigation-forward">advanced</span>
            </a>
          </nav>
          <div ng-if="footerExpanded" later="setDateAndSave(date)" editable-field-container="auto" editable-field-container-clicked-elsewhere="closeExpand()"></div>
        </footer>

      </div>

      <div class="swiper-slide" swiper-slide="taskEditor/advanced" slide-index="1" ng-init="advancedSlideInfo = {}">
        <div class="container-content" ng-style="{'padding-bottom': advancedSlideInfo.footerHeight}">

          <div ng-if="contextPickerOpen" class="swiper-no-swiping animate-fade-in" editable-field-container="auto" editable-field-container-scrollable="true" editable-field-container-clicked-elsewhere="closeContextPicker()" data-snap-ignore="true">
            <div list-picker="contexts" list-picker-new-item="{tagType: 'context'}" list-picker-save="closeContextPickerAndSetContextToItem(task, list)" list-picker-clear="closeContextPickerAndClearContextFromItem(task, list)" list-picker-get-selected="getContextFromUUID(task.transientProperties.context)" list-picker-type="context" list-picker-prefix="@"></div>
          </div>

          <div ng-if="!contextPickerOpen">
            <div class="row-form" ng-click="openContextPicker()">
              <a href ng-click="openContextPicker()">
                <span class="text-link" ng-bind="task.transientProperties.context ? '@' + getContextTitleFromUUID(task.transientProperties.context) : 'select context...'"></span>
              </a>
            </div>

            <div class="row-form">
              <select ng-if="task.transientProperties.date" ng-model="task.repeating" ng-options="repeatType as repeatType for repeatType in repeatTypes">
                <option value="">select repeating&#8230;</option>
              </select>
            </div>

            <div class="row-form">
              <input type="text" ng-model="task.link" placeholder="enter url&#8230;">
            </div>

          </div>
        </div>
        <footer class="container-content--after editor-footer" editor-footer="advancedSlideInfo">

          <div class="table">
            <div class="table-row">
              <a href class="table-cell" ng-click="convertToNote()">
                <span class="text-convert">note</span>
              </a>
              <a href class="table-cell" ng-click="convertToList()">
                <span class="text-convert">list</span>
              </a>
            </div>
          </div>

          <nav role="navigation" class="swiper-no-swiping group-symmetrical">
            <a href ng-click="swipeToBasic()" class="group-symmetrical--left link-navigation">
              <span class="text-navigation-back">basic</span>
            </a>
          </nav>
        </footer>
      </div>
    </div>
  </div>
</div>
